from appium import webdriver
from appium.options.android import UiAutomator2Options
from appium.webdriver.common.appiumby import AppiumBy
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from appium.webdriver.common.appiumby import AppiumBy

options = UiAutomator2Options()
options.platform_name = "Android"
options.automation_name = "UiAutomator2"

options.app_package = "com.fast.secure.proxyvpn.unlimitedproxy.security"
options.app_activity = "com.example.safevpn.ui.activity.MainActivity"
options.no_reset = True


print("Connecting to Appium server...")
driver = webdriver.Remote("http://127.0.0.1:4723", options=options)
print("App launched successfully!")
wait = WebDriverWait(driver, 5)

try:
    wait = WebDriverWait(driver, 30)
    exit_button = wait.until(
    EC.presence_of_element_located((AppiumBy.ID, "com.fast.secure.proxyvpn.unlimitedproxy.security:id/splash_exit")))
    exit_button.click()
    print("Exit icon clicked")
except:
    print("Could not find exit icon.")

try:
    wait = WebDriverWait(driver, 30)
    cancel_button = wait.until(
    EC.presence_of_element_located((AppiumBy.ID, "com.fast.secure.proxyvpn.unlimitedproxy.security:id/action_cancel")))
    cancel_button.click()
    print("Cancel button clicked")
except:
    print("Could not find cancel button.")

try:
    wait = WebDriverWait(driver, 30)
    exit_button = wait.until(
    EC.presence_of_element_located((AppiumBy.ID, "com.fast.secure.proxyvpn.unlimitedproxy.security:id/splash_exit")))
    exit_button.click()
    print("Exit icon clicked")
except:
    print("Could not find exit icon.")

try:
    wait = WebDriverWait(driver, 30)
    cancel_button = wait.until(
    EC.presence_of_element_located((AppiumBy.ID, "com.fast.secure.proxyvpn.unlimitedproxy.security:id/action_quit")))
    cancel_button.click()
    print("Cancel button clicked")
except:
    print("Could not find cancel button.")   
print("Test completed!")
driver.quit()